; platformIO project configuration for ESP32-S3
[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/actions
    -Isrc/actions/terminal
    -Isrc/events
    -Isrc/platform/esp32
    -Isrc/boot
    -Isrc/filesystem
    -Isrc/process

; source files - exclude PC-specific files, use ESP32 main
; NOTE: filesystem_main.cpp is excluded - it's only for the filesystem utility
build_src_filter = 
    +<*>
    -<platform/pc/*>
    -<filesystem/filesystem_main.cpp>
    -<filesystem/upload/*>
    +<platform/esp32/main_esp32.cpp>
    +<platform/esp32/keyboard_esp.cpp>
    +<boot/boot_splash.cpp>
    +<filesystem/filesystem_init.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies
lib_deps = 
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit ST7735 and ST7789 Library@^1.11.0 

; build options
build_type = release

; separate environment for filesystem creation utility
[env:esp32-s3-filesystem]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/filesystem

; source files - ONLY filesystem utility
build_src_filter = 
    +<filesystem/filesystem_main.cpp>
    +<filesystem/filesystem_init.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies (SD library is built-in to ESP32 Arduino core)
lib_deps = 

; build options
build_type = release

; separate environment for file read test
[env:esp32-s3-file-read]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/filesystem

; source files - ONLY file read test
build_src_filter = 
    +<../tests/test_file_read.cpp>
    +<filesystem/filesystem_init.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies (SD library is built-in to ESP32 Arduino core)
lib_deps = 

; build options
build_type = release

; separate environment for logo upload utility
[env:esp32-s3-upload_logo]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/filesystem

; source files - ONLY upload utility
build_src_filter = 
    +<filesystem/upload/upload_logo.cpp>
    +<filesystem/filesystem_init.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies (SD library is built-in to ESP32 Arduino core)
lib_deps = 

; build options
build_type = release

; separate environment for SD card read/write/delete test
[env:esp32-s3-sdtest]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/filesystem

; source files - ONLY SD test
build_src_filter = 
    +<../tests/test_sd.cpp>
    +<filesystem/filesystem_init.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies (SD library is built-in to ESP32 Arduino core)
lib_deps = 

; build options
build_type = release

; separate environment for SD card byte-level test
[env:esp32-s3-sdbyte]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/boot
    -Isrc/filesystem

; source files - boot splash + test
build_src_filter = 
    +<../tests/test_sd_byte.cpp>
    +<boot/boot_splash.cpp>
    +<boot/boot_sd_wrapper.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies
lib_deps = 
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit ST7735 and ST7789 Library@^1.11.0

; build options
build_type = release

; separate environment for SD card block-level test
[env:esp32-s3-sdblock]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude
    -Isrc
    -Isrc/boot
    -Isrc/filesystem

; source files - boot splash + test
build_src_filter = 
    +<../tests/test_sd_block.cpp>
    +<boot/boot_splash.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies
lib_deps = 
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit ST7735 and ST7789 Library@^1.11.0
    greiman/SdFat@^2.2.2

; build options
build_type = release

; separate environment for serial monitor echo test
[env:esp32-s3-serial-echo]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; build flags
build_flags = 
    -DESP32S3
    -DDEBUG
    -DCORE_DEBUG_LEVEL=3
    -Iinclude

; source files - ONLY serial echo test
build_src_filter = 
    +<../tests/test_serial_echo.cpp>

; upload settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = 
    default
    time

; library dependencies (none needed for basic serial test)
lib_deps = 

; build options
build_type = release
